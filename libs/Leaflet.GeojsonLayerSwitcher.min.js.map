{"version":3,"sources":["src/js/Leaflet.GeojsonLayerSwitcher.js"],"names":["L","commonStyle","opacity","weight","dashArray","GeoJSONLayerSwitcher","Handler","extend","options","propertyStateSelected","style","Object","assign","color","styleSelected","selectButton","icon","bgColor","deselectButton","popupAnchor","initialize","map","prototype","call","Util","setOptions","context","_dialog","control","dialog","initOpen","size","anchor","_geoJSONLayer","geoJson","feature","properties","hasOwnProperty","_getStyleFor","onEachFeature","layer","PolylineDecorator","decorator","polylineDecorator","patterns","addTo","_map","addHooks","dialogContent","_initDialogContent","setContent","removeHooks","getLayers","forEach","removeLayer","clearLayers","close","removeControl","addData","geojson","layers","_index","_count","length","_goTo","open","container","DomUtil","create","_navTitle","navBar","_prevButton","_switchLabel","_switchButton","setAttribute","_switchDiv","_switchSpanOn","innerHTML","_switchSpanOff","_nextButton","DomEvent","on","_previous","_next","_toggle","_currentLayer","_focus","_updateDialogFor","setStyle","_updateToggleButtonFor","readableIndex","fitBounds","getBounds","getSelection","selection","push","geoJSONLayerSwitcher"],"mappings":"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","file":"dist/Leaflet.GeojsonLayerSwitcher.min.js","sourcesContent":["export default function(L) {\r\n\r\n\tconst commonStyle = {\r\n\t\topacity: 1,\r\n\t\tweight: 5,\r\n\t\tdashArray: '10, 30',\r\n\t};\r\n\r\n\tconst GeoJSONLayerSwitcher = L.GeoJSONLayerSwitcher = L.Handler.extend({\r\n\r\n\t\toptions: {\r\n\t\t\tpropertyStateSelected: 'selected',\r\n\t\t\tstyle: Object.assign({color: '#f00'}, commonStyle),\r\n\t\t\tstyleSelected: Object.assign({color: '#0f0'}, commonStyle),\r\n\t\t\tselectButton: {\r\n\t\t\t\ticon: 'fa-plus',\r\n\t\t\t\tbgColor: '#4caf50'\r\n\t\t\t},\r\n\t\t\tdeselectButton: {\r\n\t\t\t\ticon: 'fa-minus',\r\n\t\t\t\tbgColor: '#f00'\r\n\t\t\t},\r\n\t\t\tpopupAnchor: [10, 60],\r\n\t\t},\r\n\r\n\t\tinitialize: function(map, options) {\r\n\t\t\tL.Handler.prototype.initialize.call(this, map);\r\n\t\t\tL.Util.setOptions(this, options ||Â {});\r\n\r\n\t\t\tconst context = this;\r\n\r\n\t\t\tthis._dialog = L.control.dialog({\r\n\t\t\t\tinitOpen: false,\r\n\t\t\t\tsize: [300, 160],\r\n\t\t\t\tanchor: context.options.popupAnchor,\r\n\t\t\t});\r\n\r\n\t\t\tthis._geoJSONLayer = L.geoJson(null, {\r\n\t\t\t\tstyle: function(feature) {\r\n\t\t\t\t\tif (!feature.properties.hasOwnProperty(context.options.propertyStateSelected)) {\r\n\t\t\t\t\t\tfeature.properties[context.options.propertyStateSelected] = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn context._getStyleFor(feature);\r\n\t\t\t\t},\r\n\t\t\t\tonEachFeature: function(feature, layer) {\r\n\t\t\t\t\tconst style = context._getStyleFor(feature);\r\n\t\t\t\t\tif (L.PolylineDecorator && style.hasOwnProperty('patterns')) {\r\n\t\t\t\t\t\tlayer.decorator = L.polylineDecorator(layer, {\r\n\t\t\t\t\t\t\tpatterns: style.patterns\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tlayer.decorator.addTo(context._map);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_getStyleFor: function(feature) {\r\n\t\t\treturn (feature.properties && feature.properties[this.options.propertyStateSelected]) ? this.options.styleSelected : this.options.style;\r\n\t\t},\r\n\r\n\t\taddHooks: function() {\r\n\t\t\tthis._geoJSONLayer.addTo(this._map);\r\n\t\t\tthis._dialog.addTo(this._map);\r\n\t\t\tconst dialogContent = this._initDialogContent();\r\n\t\t\tthis._dialog.setContent(dialogContent);\r\n\t\t},\r\n\r\n\t\tremoveHooks: function() {\r\n\t\t\tthis._geoJSONLayer.getLayers().forEach(layer => {\r\n\t\t\t\tif (L.PolylineDecorator && layer.hasOwnProperty('decorator')) {\r\n\t\t\t\t\tthis._map.removeLayer(layer.decorator);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._geoJSONLayer.clearLayers();\r\n\t\t\tthis._map.removeLayer(this._geoJSONLayer);\r\n\t\t\tthis._dialog.close();\r\n\t\t\tthis._map.removeControl(this._dialog);\r\n\t\t},\r\n\r\n\t\taddData: function(geojson) {\r\n\t\t\tthis._geoJSONLayer.addData(geojson);\r\n\t\t\tconst layers = this._geoJSONLayer.getLayers();\r\n\r\n\t\t\tthis._index = 0;\r\n\t\t\tthis._count = layers.length;\r\n\t\t\tif (layers.length > 0) {\r\n\t\t\t\tthis._goTo(layers[0]);\r\n\t\t\t}\r\n\t\t\tthis._dialog.open();\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\t_initDialogContent: function() {\r\n\t\t\tlet container = L.DomUtil.create('div');\r\n\r\n\t\t\tthis._navTitle = L.DomUtil.create('h4', 'leaflet-geoJSONLayerSwitcher-title', container);\r\n\t\t\tlet navBar = L.DomUtil.create('div', 'leaflet-geoJSONLayerSwitcher-navbar', container);\r\n\r\n\t\t\tthis._prevButton = L.DomUtil.create('a', 'leaflet-geoJSONLayerSwitcher prev', navBar);\r\n\t\t\tL.DomUtil.create('i', 'fa fa-chevron-left', this._prevButton);\r\n\r\n\t\t\tthis._switchLabel = L.DomUtil.create('label', '', navBar);\r\n\t\t\tthis._switchButton = L.DomUtil.create('input', 'switch', this._switchLabel);\r\n\t\t\tthis._switchButton.setAttribute('type', 'checkbox');\r\n\r\n\t\t\tthis._switchDiv = L.DomUtil.create('div', 'slider round', this._switchLabel);\r\n\t\t\tthis._switchSpanOn = L.DomUtil.create('span', 'on', this._switchDiv);\r\n\t\t\tthis._switchSpanOn.innerHTML = 'Include';\r\n\r\n\t\t\tthis._switchSpanOff = L.DomUtil.create('span', 'off', this._switchDiv);\r\n\t\t\tthis._switchSpanOff.innerHTML = 'Exclude';\r\n\r\n\t\t\tthis._nextButton = L.DomUtil.create('a', 'leaflet-geoJSONLayerSwitcher next', navBar);\r\n\t\t\tL.DomUtil.create('i', 'fa fa-chevron-right', this._nextButton);\r\n\r\n\t\t\tconst context = this;\r\n\r\n\t\t\tL.DomEvent.on(this._prevButton, 'click', function() {\r\n\t\t\t\tcontext._previous();\r\n\t\t\t}, this);\r\n\r\n\t\t\tL.DomEvent.on(this._nextButton, 'click', function() {\r\n\t\t\t\tcontext._next();\r\n\t\t\t}, this);\r\n\r\n\t\t\tL.DomEvent.on(this._switchButton, 'click', function() {\r\n\t\t\t\tcontext._toggle();\r\n\t\t\t}, this);\r\n\r\n\t\t\treturn container;\r\n\t\t},\r\n\r\n\t\t_index: 0,\r\n\t\t_count: 0,\r\n\r\n\t\t_previous: function() {\r\n\t\t\tthis._index = (this._index + this._count - 1) % this._count;\r\n\t\t\tthis._goTo(this._currentLayer());\r\n\t\t},\r\n\r\n\t\t_next: function() {\r\n\t\t\tthis._index = (this._index + 1) % this._count;\r\n\t\t\tthis._goTo(this._currentLayer());\r\n\t\t},\r\n\r\n\t\t_goTo: function(layer) {\r\n\t\t\tif (layer === null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._focus(layer);\r\n\t\t\tthis._updateDialogFor(layer);\r\n\t\t},\r\n\r\n\t\t_toggle: function() {\r\n\t\t\tlet layer = this._currentLayer();\r\n\t\t\tif (layer === null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (L.PolylineDecorator && layer.hasOwnProperty('decorator')) {\r\n\t\t\t\tthis._map.removeLayer(layer.decorator);\r\n\t\t\t\tdelete layer.decorator;\r\n\t\t\t}\r\n\r\n\t\t\tlayer.feature.properties[this.options.propertyStateSelected] = !layer.feature.properties[this.options.propertyStateSelected];\r\n\r\n\t\t\tconst style = this._getStyleFor(layer.feature);\r\n\t\t\tlayer.setStyle(style);\r\n\r\n\t\t\tif (L.PolylineDecorator && style.hasOwnProperty('patterns')) {\r\n\t\t\t\tlayer.decorator = L.polylineDecorator(layer, {\r\n\t\t\t\t\tpatterns: style.patterns\r\n\t\t\t\t});\r\n\t\t\t\tlayer.decorator.addTo(this._map);\r\n\t\t\t}\r\n\r\n\t\t\tthis._updateToggleButtonFor(layer);\r\n\t\t},\r\n\r\n\t\t_updateDialogFor: function(layer) {\r\n\t\t\tif (layer === null) {\r\n\t\t\t\tthis._dialog.close();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst readableIndex = this._index + 1;\r\n\t\t\tthis._navTitle.innerHTML = readableIndex+'/'+this._count;\r\n\t\t},\r\n\r\n\t\t_focus: function(layer) {\r\n\t\t\tif (layer === null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._map.fitBounds(layer.getBounds());\r\n\t\t},\r\n\r\n\t\t_currentLayer: function() {\r\n\t\t\tif (this._count === 0) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn this._geoJSONLayer.getLayers()[this._index];\r\n\t\t},\r\n\r\n\t\tgetSelection: function() {\r\n\t\t\tlet selection = [];\r\n\t\t\tthis._geoJSONLayer.getLayers().forEach(layer => {\r\n\t\t\t\tif (layer.feature.properties[this.options.propertyStateSelected]) {\r\n\t\t\t\t\tselection.push(layer);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn selection;\r\n\t\t},\r\n\t});\r\n\r\n\t// Factory\r\n\tL.geoJSONLayerSwitcher = function(map, options) {\r\n\t\treturn new GeoJSONLayerSwitcher(map, options);\r\n\t};\r\n\r\n\treturn GeoJSONLayerSwitcher;\r\n}\r\n"]}